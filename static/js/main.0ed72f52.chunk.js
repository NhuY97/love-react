(this["webpackJsonplove-react"]=this["webpackJsonplove-react"]||[]).push([[0],{118:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t.n(c),s=t(33),o=t.n(s),r=(t(72),t(73),t(8)),u={ONBOARDING_PAGE:"/",PLAY_GAME_PAGE:"/play/:roomId"},l="https://lovereact2.herokuapp.com/api",i={HEALTH_CHECK:"".concat(l,"/health-check"),USER_VERIFY:"".concat(l,"/user/verify"),USER_CREATE:"".concat(l,"/user/create"),USER_REMOVE:"".concat(l,"/user/remove"),GAME_CREATE:"".concat(l,"/game/create"),GAME_QUIT:"".concat(l,"/game/quit")},j=t(2),b=t(1),d=function(e){return Object(b.jsx)("div",{className:"number",onClick:e.onClick,children:Object(b.jsx)("div",{className:{0:"available",1:"player1",2:"player2"}[e.status],children:Object(b.jsx)("span",{className:e.isCurrent?"current":"",children:e.value.toString().padStart(2,"0")})})})},h=t(7),m=Object(h.b)({key:"USER_STATE",default:{username:null,roomId:null}}),O=t(63),p=t.n(O),f=t(64),x=t.n(f),v=function(){var e=Object(r.f)(),n=Object(c.useState)(null),t=Object(j.a)(n,2),a=t[0],s=t[1],o=Object(h.c)(m),l=Object(j.a)(o,2),O=l[0],f=O.username,v=O.roomId,y=l[1],E=new p.a("https://lovereact2.herokuapp.com/ws"),g=x.a.over(E);Object(c.useEffect)((function(){f&&v?g.connect({},(function(n){g.subscribe("/topic/".concat(v),(function(n){var t=JSON.parse(n.body);0===t.status?s(t.gameInfo):a||(alert(t.message),e.push(u.ONBOARDING_PAGE))})),g.send("/app/game/join/".concat(v,"/").concat(f),{},"")})):e.push(u.ONBOARDING_PAGE)}),[s]);return a?3===a.status&&a.metricNumber?Object(b.jsx)("div",{className:"board-game",children:a.metricNumber.map((function(e,n){return Object(b.jsx)(d,{onClick:function(){return 0===a.metricStatus[n]&&void((t=e)===a.currentNumber+1&&g.send("/app/game/play/".concat(a.roomId,"/").concat(f,"/").concat(t),{},""));var t},value:e,isCurrent:a.currentNumber===e,status:a.metricStatus[n]},n)}))}):4===a.status?Object(b.jsxs)("div",{className:"form-onboard",style:{justifyContent:"left"},children:[Object(b.jsxs)("h1",{style:{color:"brown"},children:["Cu\u1ed9c chi\u1ebfn \u0111\xe3 k\u1ebft th\xfac v\u1edbi ph\u1ea7n th\u1eafng thu\u1ed9c v\u1ec1 ",a.player1Point>a.player2Point?a.player1:a.player2," "]}),Object(b.jsxs)("h1",{style:{color:"brown"},children:["T\u1ed5ng \u0111i\u1ec3m c\u1ee7a b\u1ea1n: ",f===a.player1?a.player1Point:a.player2Point]}),Object(b.jsxs)("h1",{style:{color:"brown"},children:["T\u1ed5ng \u0111i\u1ec3m c\u1ee7a \u0111\u1ed1i th\u1ee7: ",f===a.player1?a.player2Point:a.player1Point]}),Object(b.jsx)("div",{className:"btn-onboard",onClick:function(){fetch("".concat(i.GAME_QUIT,"?username=").concat(f)).then((function(e){return e.json()})).then((function(n){0===n.status?(y({username:f,roomId:""}),e.push(u.ONBOARDING_PAGE),g.unsubscribe("/topic/".concat(v)),g.disconnect()):console.log(n)})).catch((function(e){return console.log(e)}))},children:Object(b.jsx)("span",{children:"Quay v\u1ec1"})})]}):Object(b.jsxs)("div",{className:"form-onboard",style:{justifyContent:"left"},children:[Object(b.jsxs)("h1",{style:{color:"brown"},children:["Room ID: ",a.roomId," "]}),Object(b.jsxs)("h1",{style:{color:"brown"},children:["Player 1: ",a.player1]}),Object(b.jsxs)("h1",{style:{color:"brown"},children:["Player 2: ",0===a.status?Object(b.jsx)("i",{style:{fontFamily:"monospace",fontSize:"xx-large",color:"slateblue"},children:"[Waiting...]"}):a.player2]}),0===a.status&&Object(b.jsx)("div",{className:"btn-onboard",onClick:function(){var e=document.createElement("textarea");e.value=v,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},children:Object(b.jsx)("span",{children:"Copy Room ID"})}),2===a.status&&Object(b.jsxs)("b",{children:[(a.player1===f?a.player2Ready:a.player1Ready)?"\u0110\u1ed1i th\u1ee7 \u0111\xe3 s\u1eb5n s\xe0ng, ":"","Tr\u1eadn chi\u1ebfn s\u1eafp b\u1eaft \u0111\u1ea7u!"]}),0!==a.status&&Object(b.jsx)("div",{className:"btn-onboard",onClick:function(){g.send("/app/game/ready/".concat(a.roomId,"/").concat(f),{},"")},children:Object(b.jsx)("span",{children:(a.player1===f?a.player1Ready:a.player2Ready)?"\u0110\u1ee3i x\xedu":"S\u1eb5n s\xe0ng"})})]}):Object(b.jsx)("div",{className:"form-onboard",children:Object(b.jsx)("p",{children:"Loading..."})})},y=t(120),E=function(){var e=Object(y.a)(["user"]),n=Object(j.a)(e,2),t=n[0],a=n[1],s=Object(c.useRef)(""),o=Object(c.useState)(!0),l=Object(j.a)(o,2),d=l[0],O=l[1],p=Object(c.useState)(""),f=Object(j.a)(p,2),x=f[0],v=f[1],E=Object(h.c)(m),g=Object(j.a)(E,2),N=g[0],I=N.username,A=N.roomId,C=g[1],G=Object(r.f)();Object(c.useEffect)((function(){fetch(i.HEALTH_CHECK).then((function(e){return e.json()})).then((function(e){return O(0===e.status)})).catch((function(e){return O(!1)})),fetch("".concat(i.USER_VERIFY,"?username=").concat(t.username)).then((function(e){return e.json()})).then((function(e){0===e.status&&e.userInfo?C({username:e.userInfo.username,roomId:e.userInfo.roomId}):C({username:null,roomId:null})})).catch((function(e){return console.log(e)}))}),[C,t.username]);var _=I?Object(b.jsxs)("p",{className:"title",children:["V\xe0o chi\u1ebfn th\xf4i n\xe0o ",I,"!"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{maxLength:"20",autoFocus:!0,ref:s,className:"user-name",type:"text",placeholder:"Nh\u1eadp t\xean c\u1ee7a b\xe9 v\xe0o \u0111\xe2y!"}),Object(b.jsx)("span",{style:{marginTop:5,color:"blue"},children:x}),Object(b.jsx)("div",{className:"btn-onboard",onClick:function(){s.current.value&&s.current.value.trim()?fetch("".concat(i.USER_CREATE,"?username=").concat(s.current.value)).then((function(e){return e.json()})).then((function(e){0===e.status&&e.userInfo?(C({username:e.userInfo.username,roomId:e.userInfo.roomId}),a("username",e.userInfo.username,{path:"/"})):(v(e.message),s.current.focus())})).catch((function(e){return console.log(e)})):(v("Ch\u01b0a nh\u1eadp t\xean k\xeca, ch\u1eafc k\xed \u0111\u1ea7u qu\xe1!"),s.current.value="",s.current.focus())},children:Object(b.jsx)("span",{children:"Go!"})})]}),R=I?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"btn-onboard",children:Object(b.jsx)("span",{children:"Gh\xe9p nhanh"})}),Object(b.jsx)("div",{className:"btn-onboard",onClick:function(){fetch("".concat(i.GAME_CREATE,"?username=").concat(I)).then((function(e){return e.json()})).then((function(e){0===e.status&&e.roomId?(C({username:I,roomId:e.roomId}),G.push(u.PLAY_GAME_PAGE.replace(":roomId",e.roomId))):404===e.status?C({username:null,roomId:null}):alert(e.message)})).catch((function(e){return console.log(e)}))},children:Object(b.jsx)("span",{children:"T\u1ea1o ph\xf2ng"})}),Object(b.jsx)("div",{className:"btn-onboard",onClick:function(){var e=prompt("Nh\u1eadp m\xe3 ph\xf2ng","");e&&(C({username:I,roomId:e}),G.push(u.PLAY_GAME_PAGE.replace(":roomId",e)))},children:Object(b.jsx)("span",{children:"V\xe0o ph\xf2ng"})}),Object(b.jsx)("div",{className:"btn-onboard",children:Object(b.jsx)("span",{children:"H\u01b0\u1edbng d\u1eabn"})}),Object(b.jsx)("div",{className:"btn-onboard",onClick:function(){fetch("".concat(i.USER_REMOVE,"?username=").concat(I)).then((function(e){return e.json()})).then((function(e){0===e.status?(C({username:null,roomId:null}),a("username",null,{path:"/"})):C({username:null,roomId:null})})).catch((function(e){return console.log(e)}))},children:Object(b.jsx)("span",{children:"Reset"})})]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"btn-onboard",children:Object(b.jsx)("span",{children:"H\u01b0\u1edbng d\u1eabn"})})});return d?Object(b.jsxs)("div",{className:"form-onboard",children:[I&&A&&G.push(u.PLAY_GAME_PAGE.replace(":roomId",A)),_,R]}):Object(b.jsx)("div",{className:"form-onboard",children:Object(b.jsxs)("p",{children:["Xin l\u1ed7i, h\u1ec7 th\u1ed1ng \u0111ang trong th\u1eddi gian b\u1ea3o tr\xec,",Object(b.jsx)("br",{}),"Vui l\xf2ng th\u1eed l\u1ea1i sau!"]})})};var g=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(r.c,{children:[Object(b.jsx)(r.a,{path:u.ONBOARDING_PAGE,exact:!0,children:Object(b.jsx)(E,{})}),Object(b.jsx)(r.a,{path:"".concat(u.PLAY_GAME_PAGE),exact:!0,children:Object(b.jsx)(v,{})}),Object(b.jsx)(r.a,{path:"*",children:Object(b.jsx)(E,{})})]})})},N=function(e){e&&e instanceof Function&&t.e(4).then(t.bind(null,122)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,s=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),s(e),o(e)}))},I=t(24),A=t(3),C=t(66),G=t.p+"static/media/background.b0ffa427.mp3",_=Object(h.b)({key:"TOGGLE_SOUND",default:{music:1}}),R="GAME_BACKGROUND";var S=Object(h.b)({key:"GAME_SOUND_STATE",default:{soundReady:!1,playBgSound:void 0,pauseBgSound:void 0}}),k=function(){var e=function(e){var n={interrupt:!0,volume:Object(h.d)(_).music},t=G;if(e)switch(e){case R:default:t=G}var c=Object(C.a)(t,n),a=Object(j.a)(c,2),s=a[0],o=a[1];return{play:s,loadedSound:o.sound,stop:o.stop,pause:o.pause}}(R),n=e.play,t=e.pause,a=e.loadedSound,s=Object(h.e)(S);return Object(c.useEffect)((function(){null!==a&&(a.loop(!0),s((function(e){return Object(A.a)(Object(A.a)({},e),{},{soundReady:!0,playBgSound:n,pauseBgSound:t})})))}),[a,n,t,s]),null};function P(){return!0}var T=Object(c.memo)(k,P),B=function(e){var n=e.children;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(T,{}),n]})},M=t(20),U=t(15),w=function(){var e=Object(h.c)(_),n=Object(j.a)(e,2),t=n[0].music,c=n[1];return Object(b.jsx)("div",{className:"btn",onClick:function(){c((function(e){return Object(A.a)(Object(A.a)({},e),{},{music:1===e.music?0:1})}))},children:Object(b.jsx)(M.a,{className:"icon",icon:t?U.f:U.e})})},D=function(){var e=Object(c.useState)(!1),n=Object(j.a)(e,2),t=n[0],a=n[1],s=Object(h.c)(S),o=Object(j.a)(s,1)[0],r=o.soundReady,u=o.pauseBgSound,l=o.playBgSound;return Object(c.useEffect)((function(){r&&(l(),a(!0))}),[r,l]),r?Object(b.jsxs)("div",{className:"btn ".concat(t?"pause":"play"),onClick:function(){t?(u(),a(!1)):(l(),a(!0))},children:[Object(b.jsx)("span",{className:"bar bar-1"}),Object(b.jsx)("span",{className:"bar bar-2"})]}):Object(b.jsx)("div",{className:"btn",children:Object(b.jsx)(M.a,{className:"icon",icon:U.d})})},F=function(){var e=Object(r.f)(),n=Object(h.c)(m),t=Object(j.a)(n,2),c=t[0].username,a=t[1];return Object(b.jsx)("div",{className:"btn",onClick:function(){fetch("".concat(i.GAME_QUIT,"?username=").concat(c)).then((function(e){return e.json()})).then((function(n){0===n.status?(a({username:c,roomId:""}),e.push(u.ONBOARDING_PAGE)):console.log(n)})).catch((function(e){return console.log(e)}))},children:Object(b.jsx)(M.a,{className:"icon",icon:U.c})})},L=function(){var e=Object(c.useState)(!1),n=Object(j.a)(e,2),t=n[0],a=n[1];return Object(c.useEffect)((function(){}),[t]),Object(b.jsxs)("div",{className:"setting-container ".concat(t?"show":"hidden"),children:[Object(b.jsx)("div",{className:"icon-fixed",onClick:function(){a(!t)},children:Object(b.jsx)(M.a,{icon:t?U.b:U.a})}),Object(b.jsx)(w,{}),Object(b.jsx)(D,{}),Object(b.jsx)(F,{})]})},H=t(121);o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(h.a,{children:Object(b.jsx)(H.a,{children:Object(b.jsx)(B,{children:Object(b.jsxs)(I.a,{children:[Object(b.jsx)(L,{}),Object(b.jsx)(g,{})]})})})})}),document.getElementById("root")),N()},72:function(e,n,t){},73:function(e,n,t){}},[[118,1,2]]]);
//# sourceMappingURL=main.0ed72f52.chunk.js.map